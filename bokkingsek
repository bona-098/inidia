onAppointmentUpdating: async function (e) {
    console.log("onAppointmentUpdating triggered");
    console.log("e.newData:", JSON.stringify(e.newData));
    console.log("e.oldData:", JSON.stringify(e.oldData));

    const appointmentData = e.newData;
    const oldAppointmentData = e.oldData;
    const currentStatus = oldAppointmentData.requestStatus;

    if (typeof appointmentData.isAutoPost === "undefined") {
        appointmentData.isAutoPost = oldAppointmentData.isAutoPost || false;
    }

    console.log("isAutoPost in onAppointmentUpdating:", appointmentData.isAutoPost);

    // Perbaiki logika pengecekan
    if (![0, 2, "0", null, 'undefined'].includes(currentStatus) && appointmentData.isAutoPost !== true) {
        console.log("❌ Update Rejected - Invalid Status");

        DevExpress.ui.notify({
            type: "error",
            displayTime: 3000,
            contentTemplate: (e) => {
                e.append(`
                    <div style="white-space: pre-line;">
                        Action Rejected!\n
                        Tidak diizinkan melakukan perubahan saat ini!\n
                    </div>
                `);
            }
        });

        e.cancel = true;
        return;
    }

    console.log("✅ Update Allowed - Proceeding...");
}
