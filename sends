onAppointmentFormOpening: function (e) {
    const form = e.form;
    const appointmentData = e.appointmentData;

    function validateBooking() {
        let selectedRoom = form.getEditor("ghm_room_id")?.option("value");  
        
        // Ambil totalPeople dari data booking berdasarkan room_id yang dipilih
        let totalBooked = booking?.find(b => b.room_id === selectedRoom)?.totalPeople || 0;

        console.log("Total Booked:", totalBooked);
        
        return { totalBooked };
    }

    let { totalBooked } = validateBooking();

    form.option('items', [
        {
            label: { text: 'Room' },
            editorType: 'dxSelectBox',
            dataField: 'ghm_room_id',
            helpText: `Total Booked: ${totalBooked}`,
            editorOptions: {
                readOnly: true,
                dataSource: roomsWithLocations,
                displayExpr: function (item) {
                    if (!item) return "";
                    return `${item.location} | ${item.text}`;
                },
                valueExpr: 'id',
                value: appointmentData.ghm_room_id || null,
                onValueChanged: function () {
                    let { totalBooked } = validateBooking();
                    form.getEditor("ghm_room_id").option("helpText", `Total Booked: ${totalBooked}`);
                }
            }
        }
    ]);
}
