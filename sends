editorOptions: {
    readOnly: false, // Agar user bisa memilih kamar
    dataSource: roomsWithLocations,
    displayExpr: function (item) {
        if (!item) return "";
        return `${item.location} | ${item.text}`;
    },
    valueExpr: 'id',
    value: appointmentData.ghm_room_id || null,
    onValueChanged: function (args) {
        let selectedRoom = roomsWithLocations.find(room => room.id === args.value);
        let roomCapacity = selectedRoom?.roomOccupancy || 0;
        let totalGuests = (form.getEditor("guest")?.option("value") || []).length +
                          (form.getEditor("family")?.option("value") || []).length +
                          (form.getEditor("employee")?.option("value") || []).length;
        let remainingCapacity = roomCapacity - totalGuests;

        form.getEditor("ghm_room_id").option("helpText", 
            `Occupancy: ${roomCapacity} | Booked: ${totalGuests} | Remaining: ${remainingCapacity}`);
        
        validateBooking(); // Validasi ulang setelah kamar dipilih
    }
}
