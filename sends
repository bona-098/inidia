const { roomCapacity, totalGuests, remainingCapacity } = validateBooking();

form.option('items', [
    {
        label: { text: 'Room' },
        editorType: 'dxSelectBox',
        dataField: 'ghm_room_id',
        helpText: `Occupancy: ${roomCapacity} | Booked: ${totalGuests} | Remaining: ${remainingCapacity}`,
        editorOptions: {
            readOnly: true,
            dataSource: roomsWithLocations,
            displayExpr: function (item) {
                if (!item) return "";
                return `${item.location} | ${item.text}`;
            },
            valueExpr: 'id',
            value: appointmentData.ghm_room_id || null,
            onValueChanged: function () {
                const { roomCapacity, totalGuests, remainingCapacity } = validateBooking();
                form.getEditor("ghm_room_id").option("helpText", 
                    `Occupancy: ${roomCapacity} | Booked: ${totalGuests} | Remaining: ${remainingCapacity}`
                );
            }
        }
    }
]);
