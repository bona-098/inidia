$booking = $requests->map(function ($request) use ($rooms, $locations) {
            $room = $rooms->firstWhere('id', $request->ghm_room_id);
            $location = $room ? $locations->firstWhere('id', $room->location_id) : null;

            return [
                'id' => $request->id,
                'text' => $request->text ?? '',
                'guest' => $request->guest ?? 0,
                'family' => $request->family ?? 0,
                'employee_id' => $request->employee_id ?? null,
                'ticketstatus' => $request->ticketStatus ?? null,
                'completeddate' => $request->completeddate ?? null,
                'confirmationStatus' => $request->confirmationStatus ?? null,
                'description' => $request->description ?? '',
                'requestStatus' => $request->requestStatus ?? 0,
                'startDate' => optional($request->startDate)->toIso8601String(),
                'endDate' => optional($request->endDate)->toIso8601String(),
                'code' => optional($request->code)->code ?? null,
                'creator' => optional($request->user)->fullname ?? null,
                'ghm_room_id' => $request->ghm_room_id,
                'roomName' => $room->roomName ?? null,
                'location' => $location->Location ?? null,
                'isMine' => $request->isMine ?? 0,
                'isPendingOnMe' => $request->isPendingOnMe ?? 0,
            ];
        });

        // Mapping room data with locations
        $roomsWithLocations = $rooms->map(function ($room) use ($locations) {
            $location = $locations->firstWhere('id', $room->location_id);
            return [
                'text' => $room->roomName,
                'id' => $room->id,
                'roomAccupancy' => $room->roomAccupancy ?? 0,
                'location' => $location ? $location->Location : null,
                'color' => '#' . substr(md5($room->roomName), 0, 6),
            ];
        });
